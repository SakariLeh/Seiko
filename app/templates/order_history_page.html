<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>История заказов</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/order_history_page.css') }}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
</head>

<body>
    <header>
        <a href="{{ url_for('dashboard.index') }}"><i class="bi bi-arrow-left"></i></a>
        <h1>История заказов</h1>
        <a href="{{ url_for('auth.logout') }}" class="logout-btn"><i class="bi bi-box-arrow-right"></i></a>
    </header>

    <section class="orders">
        {% if orders %}
            {% for order in orders %}
            <div class="order">
                <strong>Заказ №{{ order.id }}</strong>
                <div class="order-details">
                    <p>Статус: <span class="status {{ order.status_class }}">{{ order.status_text }}</span></p>
                    <p>Дата: {{ order.date }}</p>
                    {% if role == 'admin' or role == 'support' %}
                    <p>Заказчик: {{ order.customer }}</p>
                    {% endif %}
                    <p>Сумма: {{ order.amount }} ₽</p>
                    <a href="{{ url_for('dashboard.order_details', order_id=order.id) }}" class="details-btn">Подробнее</a>
                </div>
            </div>
            {% endfor %}
        {% else %}
            <p class="no-orders">У вас пока нет заказов</p>
        {% endif %}
    </section>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand(); // Развернуть Mini App
    </script>
</body>

</html>