<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Ð§Ð°Ñ‚</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/chats/chat.css') }}">
</head>
<body>
  <div class="chat-container" id="messages">

    <!-- Ð’Ñ‹Ð²Ð¾Ð´ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¸Ì† Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»Ñ‘Ð½Ð½Ð¾Ð³Ð¾ Ñ‡Ð°Ñ‚Ð° -->
    <!-- P.S Ð²ÑÐµ ÑÑ‚Ð¸Ð»Ð¸ Ð² static/css/chats/chat.css Ð¼Ð¾Ð¶ÐµÑˆÑŒ Ð¸Ñ… Ñ…Ð¾Ñ‚ÑŒ Ð²ÑÐµ Ð¿Ð¾Ð¼ÐµÐ½ÑÑ‚ÑŒ -->
    {% for message in messages %}
      <div class="message-wrapper {{ 'my-wrapper' if message.sender_id == current_user_id else 'other-wrapper' }}">
        <div class="sender-name">
          ID: {{ message.sender_id }}
          {% if message.sender_id != current_user_id %}
              Ð’Ñ‹
          {% else %}
              {{ get_user_name_service(message.sender_id) }}
          {% endif %}
        </div>
        <div class="message {{ 'my-message' if message.sender_id == current_user_id else 'other-message' }}"
            data-message-id="{{ message.id }}">
          <span class="message-text">{{ message.text }}</span>
          <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð´Ð»Ñ ÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ñ‚ÐµÐºÑÑ‚Ð° -->
          <button class="copy-btn" onclick="copyMessage(this)">ðŸ“‹</button> 

          <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð´Ð»Ñ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ -->
          {% if message.sender_id == current_user_id %}
            <button class="delete-btn" onclick="deleteMessage({{ message.id }})">âœ–</button>
          {% endif %}
        </div>
      </div>
    {% endfor %}
  </div>

  <!-- Ð¤Ð¾Ñ€Ð¼Ð° Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ¸ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹ -->
  <div class="chat-input">
    <input id="myMessage" autocomplete="off" placeholder="Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ..." />
    <button onclick="send()">ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ</button>
  </div>


  <!-- Ð¡ÐºÑ€Ð¸Ð¿Ñ‚Ñ‹ Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð²ÑÑ‘ Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð»Ð¾ -->
  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
  <script>
    const chatId = {{ chat.id }};
    const currentUserId = {{ current_user_id }};
  </script>
  <script src="{{ url_for('static', filename='js/chat.js') }}"></script>
</body>
</html>
